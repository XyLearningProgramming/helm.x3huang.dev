apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: traefik-ingress
  namespace: kube-system
  annotations:
    spec.ingressClassName: traefik
    kubernetes.io/ingress.class: {{ .Values.ingressClass | default "traefik" }}
    cert-manager.io/cluster-issuer: {{ .Values.clusterIssuer.name }}
spec:
  ingressClassName: traefik
  rules:
    - host: {{ .Values.DOMAIN }}
      http:
        paths:
          - path: /dashboards/{{ .Values.ingressClass }}
            pathType: Prefix
            backend:
              service:
                name: {{ include "ingress-cert.dashboardServiceName" . }}
                port:
                  number: {{ .Values.dashboard.service.port }}